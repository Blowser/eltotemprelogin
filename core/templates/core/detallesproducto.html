{% extends 'core/base.html' %}
{% load static %}
{% block content %}
<section class="container my-5">
  <div class="row">
    <div class="col-md-6">
      {% with 'core/img/productos/'|add:producto.slug|add:'.webp' as ruta_img %}
        <img src="{% static ruta_img %}" class="img-fluid rounded shadow" alt="{{ producto.nombre }}"
             onerror="this.onerror=null;this.src='{% static 'core/img/placeholder.png' %}';">
      {% endwith %}
    </div>
    <div class="col-md-6">
      <h2>{{ producto.nombre }}</h2>
      <p class="text-muted"><strong>Tipo:</strong> {{ producto.tipo_producto }}</p>
      <p>{{ producto.descripcion|safe }}</p>
      <p><strong>Precio:</strong> ${{ producto.precio_unitario }}</p>
      <p><strong>Stock:</strong> {{ producto.stock_total }}</p>
      <form method="post" action="{% url 'agregar_al_carrito' producto.id_producto %}">
        {% csrf_token %}
        <div class="mb-3">
          <label for="cantidad" class="form-label">Cantidad:</label>
          <input type="number" name="cantidad" id="cantidad" value="1" min="1" max="{{ producto.stock_total }}" class="form-control" required>
        </div>
        <button type="submit" class="btn btn-success">üõí Agregar al carrito</button>
      </form>


      <a href="{% url 'productos' %}" class="btn btn-outline-secondary mt-3">‚Üê Volver al cat√°logo</a>
    </div>
  </div>
</section>
{% endblock %}
